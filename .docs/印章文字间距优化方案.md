# 印章文字间距优化方案

## 问题描述

在生成印章时，公司名称环绕圆弧排列存在以下问题：

### 问题一：字数少时间距过大

当公司名称字数较少（如 3-5 个字）时，由于使用固定的弧度范围（252 度），每个字符分摊的角度很大，导致字间距过大，看起来不真实。

### 问题二：字数多时文字拥挤

当公司名称字数较多（如 15+ 个字）时，在固定字体大小下，文字会变得非常拥挤，甚至可能重叠。

## 原始代码分析

```javascript
// 原始实现 - 固定弧度范围
const totalArc = Math.PI * 1.4; // 约 252 度
const startAngle = Math.PI * 0.8; // 从左下方开始
const angleStep = charCount > 1 ? totalArc / (charCount - 1) : 0;
```

问题根源：弧度范围是固定的，没有根据字数动态调整。

## 解决方案

采用**混合方案**：同时动态调整弧度范围和字体大小。

### 策略设计

| 字数范围 | 弧度策略 | 字体策略 |
|---------|---------|---------|
| ≤ 6 字 | 缩小弧度范围（约 120-150 度），文字集中在顶部 | 保持正常字体 |
| 7-12 字 | 使用标准弧度（约 200-250 度） | 保持正常字体 |
| ≥ 13 字 | 弧度保持最大（约 260 度） | 字体按比例缩小 |

### 核心参数

- **单字理想弧度**：约 18-22 度（可配置）
- **最小弧度**：120 度（防止字数少时太集中）
- **最大弧度**：260 度（底部留空给五角星区域）
- **基准字数**：12 个字（超过此值开始缩小字体）
- **最小字体比例**：0.6（字体最多缩小到原始的 60%）

### 实现逻辑

1. 根据字数计算「理想弧度」= 字数 × 单字弧度
2. 将弧度限制在 [最小弧度, 最大弧度] 范围内
3. 如果字数超过基准字数，计算字体缩放比例
4. 应用缩放后的字体和弧度进行绘制

## 预期效果

- 4 个字：集中在顶部约 90 度范围，间距适中
- 8 个字：分布在约 180 度范围，正常显示
- 12 个字：分布在约 250 度范围，正常字体
- 18 个字：分布在最大弧度，字体适当缩小

## 实现日期

2026-02-05
