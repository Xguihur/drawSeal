# æ‰¹é‡ç”Ÿæˆå°ç« æ¥å£æ–‡æ¡£

> æ–‡æ¡£åˆ›å»ºæ—¶é—´ï¼š2026-02-05  
> æ¥å£ç‰ˆæœ¬ï¼šv1.0

---

## ğŸ“Œ æ¥å£æ¦‚è¿°

æœ¬æ¥å£ç”¨äºæ‰¹é‡ç”Ÿæˆå¤šä¸ªå°ç« å›¾ç‰‡ï¼Œå¹¶æ‰“åŒ…æˆ ZIP æ–‡ä»¶è¿”å›ã€‚é€‚ç”¨äºéœ€è¦ä¸€æ¬¡æ€§ç”Ÿæˆå¤šä¸ªå…¬å¸/ç»„ç»‡å°ç« çš„åœºæ™¯ã€‚

---

## ğŸ”— æ¥å£ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **è¯·æ±‚åœ°å€** | `/api/seal/download` |
| **è¯·æ±‚æ–¹æ³•** | `POST` |
| **Content-Type** | `application/json` |
| **å“åº”ç±»å‹** | `application/zip` |

---

## ğŸ“¥ è¯·æ±‚å‚æ•°

### Request Body

```json
{
  "names": ["å…¬å¸A", "å…¬å¸B", "å…¬å¸C"],
  "fontSize": 36,
  "size": 300,
  "color": "#f03618",
  "borderWidth": 6,
  "starSize": 50,
  "code": "2024010112345"
}
```

### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| `names` | `string[]` | âœ… æ˜¯ | - | å°ç« åç§°æ•°ç»„ï¼Œæ¯ä¸ªåç§°ç”Ÿæˆä¸€ä¸ªå°ç«  |
| `fontSize` | `number` | å¦ | `36` | å°ç« æ–‡å­—å­—å·ï¼ˆå•ä½ï¼špxï¼‰ |
| `size` | `number` | å¦ | `300` | å°ç« å›¾ç‰‡å°ºå¯¸ï¼ˆå•ä½ï¼špxï¼‰ |
| `color` | `string` | å¦ | `#f03618` | å°ç« é¢œè‰²ï¼ˆåå…­è¿›åˆ¶é¢œè‰²å€¼ï¼‰ |
| `borderWidth` | `number` | å¦ | `6` | è¾¹æ¡†å®½åº¦ï¼ˆå•ä½ï¼špxï¼‰ |
| `starSize` | `number` | å¦ | `50` | ä¸­å¿ƒäº”è§’æ˜Ÿå¤§å°ï¼ˆå•ä½ï¼špxï¼‰ |
| `code` | `string` | å¦ | è‡ªåŠ¨ç”Ÿæˆ | åº•éƒ¨ç¼–ç ï¼ˆ13-14ä½ï¼‰ï¼Œä¸ä¼ å…¥åˆ™è‡ªåŠ¨æ ¹æ®å…¬å¸åç§°åŒ¹é…çœä»½/åŸå¸‚ç”Ÿæˆ |
| `code` | `string` | å¦ | è‡ªåŠ¨ç”Ÿæˆ | åº•éƒ¨ç¼–ç ï¼ˆ13-14ä½ï¼‰ï¼Œä¸ä¼ å…¥åˆ™è‡ªåŠ¨æ ¹æ®å…¬å¸åç§°åŒ¹é…çœä»½/åŸå¸‚ç”Ÿæˆ |

### å‚æ•°é™åˆ¶

- `names` æ•°ç»„ä¸èƒ½ä¸ºç©º
- `names` ä¸­çš„æ¯ä¸ªåç§°å°†ä½œä¸ºç”Ÿæˆçš„ PNG æ–‡ä»¶å

---

## ğŸ“¤ å“åº”è¯´æ˜

### æˆåŠŸå“åº”

- **Content-Type**: `application/zip`
- **Content-Disposition**: `attachment; filename="æ‰¹é‡ç”Ÿæˆç« _æ—¶é—´æˆ³.zip"`

å“åº”ä½“ä¸º ZIP æ–‡ä»¶çš„äºŒè¿›åˆ¶æµï¼ŒåŒ…å«æ‰€æœ‰ç”Ÿæˆçš„å°ç«  PNG å›¾ç‰‡ã€‚

#### ZIP æ–‡ä»¶ç»“æ„

```
æ‰¹é‡ç”Ÿæˆç« _1738745678901.zip
â”œâ”€â”€ å…¬å¸A.png
â”œâ”€â”€ å…¬å¸B.png
â””â”€â”€ å…¬å¸C.png
```

### é”™è¯¯å“åº”

```json
{
  "success": false,
  "error": "é”™è¯¯ä¿¡æ¯"
}
```

#### å¸¸è§é”™è¯¯

| HTTP çŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|------------|---------|------|
| `400` | ç¼ºå°‘å¿…å¡«å‚æ•°: names (å°ç« åç§°æ•°ç»„)ï¼Œä¸”å¿…é¡»æ˜¯éç©ºæ•°ç»„ | æœªä¼ å…¥ `names` æˆ– `names` ä¸æ˜¯æ•°ç»„æˆ–ä¸ºç©ºæ•°ç»„ |
| `500` | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | å°ç« ç”Ÿæˆæˆ–æ‰“åŒ…è¿‡ç¨‹å‡ºé”™ |

---

## ğŸ“ è°ƒç”¨ç¤ºä¾‹

### cURL

```bash
curl -X POST http://localhost:3301/api/seal/download \
  -H "Content-Type: application/json" \
  -d '{
    "names": ["åŒ—äº¬æŸæŸç§‘æŠ€æœ‰é™å…¬å¸", "ä¸Šæµ·æŸæŸä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸", "æ·±åœ³æŸæŸç½‘ç»œæœ‰é™å…¬å¸"],
    "fontSize": 36,
    "size": 300,
    "color": "#f03618",
    "code": "2024010112345"
  }' \
  -o æ‰¹é‡å°ç« .zip
```

### JavaScript (Fetch)

```javascript
async function downloadSeals() {
  const response = await fetch('http://localhost:3301/api/seal/download', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      names: ['å…¬å¸A', 'å…¬å¸B', 'å…¬å¸C'],
      fontSize: 36,
      size: 300,
      color: '#f03618',
      code: '2024010112345'
    }),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error);
  }

  // è·å–æ–‡ä»¶å
  const contentDisposition = response.headers.get('Content-Disposition');
  const filename = decodeURIComponent(
    contentDisposition.match(/filename="(.+)"/)[1]
  );

  // ä¸‹è½½æ–‡ä»¶
  const blob = await response.blob();
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  a.click();
  window.URL.revokeObjectURL(url);
}
```

### JavaScript (Axios)

```javascript
import axios from 'axios';

async function downloadSeals() {
  const response = await axios.post(
    'http://localhost:3301/api/seal/download',
    {
      names: ['å…¬å¸A', 'å…¬å¸B', 'å…¬å¸C'],
      fontSize: 36,
      size: 300,
      color: '#f03618',
      code: '2024010112345'
    },
    {
      responseType: 'blob'
    }
  );

  // è·å–æ–‡ä»¶å
  const contentDisposition = response.headers['content-disposition'];
  const filename = decodeURIComponent(
    contentDisposition.match(/filename="(.+)"/)[1]
  );

  // åˆ›å»ºä¸‹è½½é“¾æ¥
  const url = window.URL.createObjectURL(new Blob([response.data]));
  const link = document.createElement('a');
  link.href = url;
  link.setAttribute('download', filename);
  document.body.appendChild(link);
  link.click();
  link.remove();
  window.URL.revokeObjectURL(url);
}
```

### Python (requests)

```python
import requests

def download_seals():
    url = 'http://localhost:3301/api/seal/download'
    payload = {
        'names': ['å…¬å¸A', 'å…¬å¸B', 'å…¬å¸C'],
        'fontSize': 36,
        'size': 300,
        'color': '#f03618',
        'code': '2024010112345'
    }
    
    response = requests.post(url, json=payload)
    
    if response.status_code == 200:
        # ä»å“åº”å¤´è·å–æ–‡ä»¶å
        content_disposition = response.headers.get('Content-Disposition', '')
        filename = 'æ‰¹é‡å°ç« .zip'
        if 'filename=' in content_disposition:
            import urllib.parse
            filename = urllib.parse.unquote(
                content_disposition.split('filename="')[1].split('"')[0]
            )
        
        # ä¿å­˜æ–‡ä»¶
        with open(filename, 'wb') as f:
            f.write(response.content)
        print(f'ä¸‹è½½æˆåŠŸ: {filename}')
    else:
        print(f'ä¸‹è½½å¤±è´¥: {response.json()}')

download_seals()
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **æ‰¹é‡æ•°é‡**ï¼šå»ºè®®å•æ¬¡è¯·æ±‚ä¸è¶…è¿‡ 100 ä¸ªå°ç« ï¼Œé¿å…è¯·æ±‚è¶…æ—¶
2. **åç§°é•¿åº¦**ï¼šå°ç« åç§°å»ºè®®æ§åˆ¶åœ¨ 15 ä¸ªæ±‰å­—ä»¥å†…ï¼Œè¿‡é•¿å¯èƒ½å½±å“æ˜¾ç¤ºæ•ˆæœ
3. **æ–‡ä»¶å**ï¼š`names` ä¸­çš„åç§°ä¼šç›´æ¥ä½œä¸º PNG æ–‡ä»¶åï¼Œè¯·é¿å…ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ `/ \ : * ? " < > |`ï¼‰

---

## ğŸ”„ ç›¸å…³æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/seal` | GET | å•ä¸ªå°ç« ç”Ÿæˆï¼ˆè¿”å› PNG å›¾ç‰‡ï¼‰ |
| `/api/seal` | POST | å•ä¸ªå°ç« ç”Ÿæˆï¼ˆè¿”å› Base64ï¼‰ |
| `/health` | GET | æœåŠ¡å¥åº·æ£€æŸ¥ |

---

**æ–‡æ¡£ç»´æŠ¤è€…ï¼š** AI Assistant  
**æœ€åæ›´æ–°ï¼š** 2026-02-10
